"use strict";(self.webpackChunkangular_blog=self.webpackChunkangular_blog||[]).push([[792],{6792:(M,l,o)=>{o.r(l),o.d(l,{EmailVerificationModule:()=>V});var c=o(6895),f=o(433),p=o(9596),r=o(4743),m=o(6708),d=o(4004),t=o(8274),u=o(7556);let h=(()=>{class e{constructor(n,s){this._authService=n,this._cd=s,this.email$=this._authService.session$.pipe((0,d.U)(a=>a.email)),this.buttonIsDisabled=!1}ngOnInit(){this.disableButton()}ngOnDestroy(){this.emailSubs?.unsubscribe()}sendEmail(){this.disableButton(),this.emailSubs=this._authService.sendVerificationEmail().subscribe()}disableButton(){this.buttonIsDisabled=!0,setTimeout(()=>{this.buttonIsDisabled=!1,this._cd.detectChanges()},10500)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(u.e),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-notification"]],decls:10,vars:4,consts:[["id","content",1,"container-sm"],[1,"text-center"],["type","button",1,"btn-1","centered",3,"disabled","click"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"main")(2,"p",1),t._uU(3,"We have sent you an email to "),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"async"),t.qZA(),t._uU(7," with instructions to verify your account!"),t.qZA(),t.TgZ(8,"button",2),t.NdJ("click",function(){return s.sendEmail()}),t._uU(9,"Send me other email"),t.qZA()()()),2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,2,s.email$)),t.xp6(3),t.Q6J("disabled",s.buttonIsDisabled))},dependencies:[c.Ov],styles:["main[_ngcontent-%COMP%]{width:100%;background-color:#fff;padding:3.5rem;box-shadow:6px 6px 18px #00000059;border-radius:2rem}main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 3.5rem}main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#2e7bff}"],changeDetection:0}),e})();function g(e,i){1&e&&(t.TgZ(0,"p",3),t._uU(1,"Loading..."),t.qZA())}function b(e,i){1&e&&(t.TgZ(0,"p",6),t._uU(1,"Account succesfully verified!"),t.qZA())}function _(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div")(1,"p",7),t._uU(2,"The token is not valid, try again."),t.qZA(),t.TgZ(3,"button",8),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(2);return t.KtG(a.sendEmail())}),t._uU(4,"Send me other email"),t.qZA()()}}function y(e,i){if(1&e&&(t.YNc(0,b,2,0,"p",4),t.YNc(1,_,5,0,"div",5)),2&e){const n=t.oxw();t.Q6J("ngIf",n.success),t.xp6(1),t.Q6J("ngIf",!n.success)}}let v=(()=>{class e{constructor(n,s,a,x){this._authService=n,this._route=s,this._router=a,this._cd=x,this.response=!1}ngOnInit(){this.paramsSubs=this._route.paramMap.subscribe(n=>{const s=n.get("token")??"";this.emailVerifySubs=this._authService.emailVerify(s).subscribe({error:()=>this.updateView(!1),next:()=>this.updateView(!0)})})}ngOnDestroy(){this.paramsSubs.unsubscribe(),this.emailVerifySubs?.unsubscribe(),this.sendEmailSubs?.unsubscribe()}sendEmail(){this.response=!1,this.success=!1,this.sendEmailSubs=this._authService.sendVerificationEmail().subscribe(()=>this._router.navigate(["/email/notification"]))}updateView(n){this.success=n,this.response=!0,this._cd.detectChanges()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(u.e),t.Y36(r.gz),t.Y36(r.F0),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-email-verify"]],decls:5,vars:2,consts:[["id","content",1,"container-sm"],["class","text-center",4,"ngIf","ngIfElse"],["responses",""],[1,"text-center"],["class","text-center success",4,"ngIf"],[4,"ngIf"],[1,"text-center","success"],[1,"text-center","fail"],[1,"btn-1","centered",3,"click"]],template:function(n,s){if(1&n&&(t.TgZ(0,"div",0)(1,"main"),t.YNc(2,g,2,0,"p",1),t.YNc(3,y,2,2,"ng-template",null,2,t.W1O),t.qZA()()),2&n){const a=t.MAs(4);t.xp6(2),t.Q6J("ngIf",!s.response)("ngIfElse",a)}},dependencies:[c.O5],styles:["main[_ngcontent-%COMP%]{width:100%;background-color:#fff;padding:3.5rem;box-shadow:6px 6px 18px #00000059;border-radius:2rem}main[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#2e7bff}main[_ngcontent-%COMP%]   .fail[_ngcontent-%COMP%]{margin:0 0 2rem}"],changeDetection:0}),e})();const C=[{path:"",redirectTo:"/404",pathMatch:"full"},{title:(0,m.mT)("Email Sent"),path:"notification",component:h},{title:(0,m.mT)("Email Verify"),path:"verify/:token",component:v}];let E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,r.Bz.forChild(C),r.Bz]}),e})(),V=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,f.UX,p.U,E]}),e})()}}]);